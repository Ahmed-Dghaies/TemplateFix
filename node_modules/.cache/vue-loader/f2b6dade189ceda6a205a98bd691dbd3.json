{"remainingRequest":"/Users/ahmeddghaies/Documents/GitHub/cynoia-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ahmeddghaies/Documents/GitHub/cynoia-front/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ahmeddghaies/Documents/GitHub/cynoia-front/src/views/Login.vue","mtime":1596120057766},{"path":"/Users/ahmeddghaies/Documents/GitHub/cynoia-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ahmeddghaies/Documents/GitHub/cynoia-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ahmeddghaies/Documents/GitHub/cynoia-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ahmeddghaies/Documents/GitHub/cynoia-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBVc2VyIGZyb20gIi4uL21vZGVscy91c2VyIjsKdmFyIHNoYTUxMiA9IHJlcXVpcmUoImpzLXNoYTUxMiIpOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJMb2dpbiIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXI6IG5ldyBVc2VyKCIiLCAiIiwgIiIsICIiLCAiIiwgIiIsICIiLCAiIiwgIiIsICIiLCAiIiwgIiIpLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgbWVzc2FnZTogIiIsCiAgICAgIHBhc3N3b3JkOiAiIgogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBsb2dnZWRJbigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmF1dGguc3RhdHVzLmxvZ2dlZEluOwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLmxvZ2dlZEluKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvcHJvZmlsZSIpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlTG9naW4oKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuJHZhbGlkYXRvci52YWxpZGF0ZUFsbCgpLnRoZW4oaXNWYWxpZCA9PiB7CiAgICAgICAgaWYgKCFpc1ZhbGlkKSB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnVzZXIuZW1haWwgJiYgdGhpcy5wYXNzd29yZCkgewogICAgICAgICAgdGhpcy51c2VyLnBhc3N3b3JkID0gc2hhNTEyKHRoaXMucGFzc3dvcmQpOwogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImF1dGgvbG9naW4iLCB0aGlzLnVzZXIpLnRoZW4oCiAgICAgICAgICAgICgpID0+IHsKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3Byb2ZpbGUiKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXJyb3IgPT4gewogICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9CiAgICAgICAgICAgICAgICAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2UuZGF0YSkgfHwKICAgICAgICAgICAgICAgIGVycm9yLm1lc3NhZ2UgfHwKICAgICAgICAgICAgICAgIGVycm9yLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"col-md-12\">\n    <div class=\"card card-container\">\n      <div class=\"auth-card-header header-primary\">\n        <h2 class=\"has-text-centered\">CYNOIA</h2>\n      </div>\n      <form name=\"form\" @submit.prevent=\"handleLogin\">\n        <div class=\"form-group\">\n          <input\n            v-model=\"user.email\"\n            v-validate=\"'required'\"\n            type=\"text\"\n            class=\"form-control\"\n            name=\"email\"\n            placeholder=\"Email\"\n          />\n          <i class=\"fa fa-envelope-o\" aria-hidden=\"true\"></i>\n          <div v-if=\"errors.has('email')\" class=\"alert alert-danger\" role=\"alert\">email is required!</div>\n        </div>\n        <div class=\"form-group\">\n          <input\n            v-model=\"password\"\n            v-validate=\"'required'\"\n            type=\"password\"\n            class=\"form-control\"\n            name=\"password\"\n            placeholder=\"Password\"\n          />\n          <i class=\"fa fa-key\" aria-hidden=\"true\"></i>\n          <div\n            v-if=\"errors.has('password')\"\n            class=\"alert alert-danger\"\n            role=\"alert\"\n          >Password is required!</div>\n        </div>\n        <div class=\"form-group\">\n          <button class=\"button\" :disabled=\"loading\">\n            <span v-show=\"loading\" class=\"spinner-border spinner-border-sm\"></span>\n            <span>Login</span>\n          </button>\n        </div>\n        <div class=\"form-group\">\n          <div v-if=\"message\" class=\"alert alert-danger\" role=\"alert\">{{message}}</div>\n        </div>\n      </form>\n      <p class=\"has-account\">\n        <a href=\"/register\">Don't have an account?</a>\n      </p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport User from \"../models/user\";\nvar sha512 = require(\"js-sha512\");\n\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      user: new User(\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"),\n      loading: false,\n      message: \"\",\n      password: \"\"\n    };\n  },\n  computed: {\n    loggedIn() {\n      return this.$store.state.auth.status.loggedIn;\n    }\n  },\n  created() {\n    if (this.loggedIn) {\n      this.$router.push(\"/profile\");\n    }\n  },\n  methods: {\n    handleLogin() {\n      this.loading = true;\n      this.$validator.validateAll().then(isValid => {\n        if (!isValid) {\n          this.loading = false;\n          return;\n        }\n\n        if (this.user.email && this.password) {\n          this.user.password = sha512(this.password);\n          this.$store.dispatch(\"auth/login\", this.user).then(\n            () => {\n              this.$router.push(\"/profile\");\n            },\n            error => {\n              this.loading = false;\n              this.message =\n                (error.response && error.response.data) ||\n                error.message ||\n                error.toString();\n            }\n          );\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n@import \"https://fonts.googleapis.com/css?family=Pacifico&display=swap\";\n@import \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\";\n@import \"./../assets/css/auth.css\";\n</style>"]}]}